{% extends 'layout.html' %}
{% block content %}
<head>
  <style>
    .d-none { display: none; }
  </style>
</head>
<form method="get" action="{{url_for('index')}}" class= "mb-3">
    <input type="text" name="q" class="form-control" placeholder="Search..." value="{{query}}">
</form>
<a href="{{ url_for('add') }}" class="btn btn-success mb-3">Add Contact</a>
<!-- Import Button -->
<button class="btn btn-info mb-3" onclick="document.getElementById('import-section').classList.toggle('d-none')">Import</button>

<!-- Import Section -->
<div id="import-section" class="d-none mb-3">
    <form action="{{ url_for('download_update_template') }}" method="GET">
        <button type="submit" class="btn btn-warning">Download List to Update</button>
    </form>
    <br>
    <form action="{{ url_for('import_new_students') }}" method="POST" enctype="multipart/form-data">
        <input type="file" name="file" accept=".xlsx" required>
        <button type="submit" class="btn btn-success">Import New Students</button>
    </form>
    <br>
    <form action="{{ url_for('upload_updated_excel') }}" method="POST" enctype="multipart/form-data">
        <input type="file" name="file" accept=".xlsx" required>
        <button type="submit" class="btn btn-primary">Upload Updated Excel</button>
    </form>
</div>
<table class="table table-bordered">
    <thead><tr><th>Name</th><th>fathername</th><th>fathermobile</th><th>fatheremail</th><th>mothername</th><th>mothermobile</th><th>motheremail</th><th>Address</th><th>Action</th></tr></thead>
    <tbody>
    {% for contact in contacts.items %}
        <tr>
            <td>{{ contact.name }}</td>
            <td>{{ contact.fathername }}</td>
            <td>{{ contact.fathermobile }}</td>
            <td>{{ contact.fatheremail }}</td>
            <td>{{ contact.mothername }}</td>
            <td>{{ contact.mothermobile }}</td>
            <td>{{ contact.motheremail }}</td>
            <td>{{ contact.address }}</td>
            <td>
                <a href="{{ url_for('edit', id=contact.id) }}" class="btn btn-sm btn-primary">Edit</a>
                <a href="{{ url_for('delete', id=contact.id) }}" class="btn btn-sm btn-danger" onclick="return confirm('Delete this contact?')">Delete</a>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>

<nav>
  <ul class="pagination">
    {% for page_num in range(1, total_pages+1) %}
      <li class="page-item {% if contacts.page == page_num %}active{% endif %}">
        <a class="page-link" href="{{ url_for('index', page=page_num, q=query) }}">{{ page_num }}</a>
      </li>
    {% endfor %}
  </ul>
</nav>
{% endblock %}"></a>